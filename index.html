<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NAVCAL Seating Chart</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #f5f4f0;
    --surface: #ffffff;
    --border: #d8d5ce;
    --text: #1a1916;
    --muted: #8a8780;
    --tag: #ebe9e4;
    --label-color: #b0aca4;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'IBM Plex Sans', sans-serif;
    padding: 32px 72px 48px;
  }
  h1 {
    font-size: 0.85rem;
    font-weight: 500;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    text-align: center;
    margin-bottom: 24px;
  }

  /* toolbar */
  .toolbar {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    margin-bottom: 20px;
    flex-wrap: wrap;
  }
  #search {
    width: 220px;
    border: 1px solid var(--border); border-radius: 4px;
    padding: 7px 12px; font-family: inherit; font-size: 0.78rem;
    background: var(--surface); color: var(--text); outline: none;
  }
  #search:focus { border-color: #aaa8a0; }
  #cold-call-btn {
    display: flex; align-items: center; gap: 7px;
    background: var(--text); color: var(--surface);
    border: none; border-radius: 4px;
    padding: 7px 14px;
    font-family: inherit; font-size: 0.78rem; font-weight: 500;
    cursor: pointer; transition: opacity 0.15s; white-space: nowrap;
  }
  #cold-call-btn:hover { opacity: 0.78; }

  /* cold call overlay */
  #cc-overlay {
    display: none;
    position: fixed; inset: 0;
    background: rgba(26,25,22,0.5);
    z-index: 200;
    align-items: center; justify-content: center;
  }
  #cc-overlay.active { display: flex; }
  #cc-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 32px 40px;
    text-align: center;
    min-width: 210px;
    animation: popIn 0.18s ease;
  }
  @keyframes popIn {
    from { transform: scale(0.88); opacity: 0; }
    to   { transform: scale(1);    opacity: 1; }
  }
  #cc-photo {
    width: 88px; height: 88px;
    border-radius: 50%; overflow: hidden;
    background: var(--tag);
    margin: 0 auto 14px;
    border: 2px solid var(--border);
    display: flex; align-items: center; justify-content: center;
  }
  #cc-photo img { width: 100%; height: 100%; object-fit: cover; display: block; }
  #cc-initials { font-size: 1.4rem; font-weight: 300; color: var(--muted); }
  #cc-name { font-size: 1rem; font-weight: 500; margin-bottom: 4px; }
  #cc-group { font-size: 0.66rem; letter-spacing: 0.08em; text-transform: uppercase; color: var(--muted); margin-bottom: 20px; }
  .cc-actions { display: flex; gap: 8px; justify-content: center; }
  .cc-btn {
    border-radius: 4px; padding: 6px 14px;
    font-family: inherit; font-size: 0.74rem; font-weight: 500;
    cursor: pointer; border: 1px solid var(--border);
    background: var(--bg); color: var(--text); transition: background 0.1s;
  }
  .cc-btn:hover { background: var(--tag); }
  .cc-btn.primary { background: var(--text); color: var(--surface); border-color: var(--text); }
  .cc-btn.primary:hover { opacity: 0.82; background: var(--text); }

  /* layout — 3 equal columns */
  .chart {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    align-items: start;
  }
  .col { display: flex; flex-direction: column; gap: 10px; }

  /* group */
  .group {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 5px;
    padding: 10px 12px 12px;
    display: flex; flex-direction: column; gap: 8px;
  }
  .group-label {
    font-size: 0.58rem; font-weight: 500;
    letter-spacing: 0.1em; text-transform: uppercase;
    color: var(--label-color);
    padding-bottom: 5px;
    border-bottom: 1px solid var(--bg);
    margin-bottom: 1px;
  }
  .row { display: flex; gap: 8px; flex-wrap: wrap; }

  /* person card */
  .p {
    position: relative;
    display: flex; flex-direction: column; align-items: center;
    gap: 5px;
    background: var(--tag);
    border-radius: 6px;
    padding: 8px 8px 6px;
    font-size: 0.68rem; font-weight: 400;
    text-align: center;
    width: 72px;
    cursor: default;
    transition: box-shadow 0.15s;
  }
  .p:hover { box-shadow: 0 0 0 2px #c8c4bb; z-index: 1; }
  .p.np {
    background: transparent;
    border: 1px dashed var(--border);
    color: var(--muted);
  }
  .p.np:hover { box-shadow: 0 0 0 2px var(--border); }

  .avatar { width: 44px; height: 44px; border-radius: 50%; overflow: hidden; flex-shrink: 0; background: var(--border); }
  .avatar img { width: 100%; height: 100%; object-fit: cover; display: block; }
  .avatar-placeholder { width: 100%; height: 100%; background: var(--bg); }
  .np .avatar { background: transparent; border: 1px dashed var(--border); }
  .p.missing .avatar { background: var(--bg); border: 1px dashed var(--border); }
  .p span { line-height: 1.3; word-break: break-word; }

  /* zoom popup */
  .zoom {
    position: absolute;
    bottom: calc(100% + 8px); left: 50%;
    transform: translateX(-50%) scale(0.85);
    transform-origin: bottom center;
    width: 110px; height: 110px;
    border-radius: 8px; overflow: hidden;
    background: var(--surface);
    box-shadow: 0 4px 20px rgba(0,0,0,0.18);
    border: 1px solid var(--border);
    opacity: 0; pointer-events: none;
    transition: opacity 0.15s, transform 0.15s;
    z-index: 100;
  }
  .zoom img { width: 100%; height: 100%; object-fit: cover; display: block; }
  .p:hover .zoom { opacity: 1; transform: translateX(-50%) scale(1); }

  /* states */
  .p.called { box-shadow: 0 0 0 2px #e8a030; background: #fdf3e0; }
  .p.np.called { box-shadow: 0 0 0 2px #e8a030; background: #fdf3e0; border-color: #e8a030; color: var(--text); }
  .p.highlight { box-shadow: 0 0 0 2px #e8a030; background: #fdf3e0; }
  .p.np.highlight { box-shadow: 0 0 0 2px #e8a030; background: #fdf3e0; border-color: #e8a030; color: var(--text); }
  .p.dim { opacity: 0.25; }

  @media (max-width: 900px) { body { padding: 24px 24px 40px; } .chart { grid-template-columns: 1fr 1fr; } }
  @media (max-width: 540px) { body { padding: 16px 12px 32px; } .chart { grid-template-columns: 1fr; } .p { width: 64px; font-size: 0.62rem; } .avatar { width: 38px; height: 38px; } }
</style>
</head>
<body>

<h1>NAVCAL Seating Chart</h1>

<div class="toolbar">
  <input type="text" id="search" placeholder="Search by name…" autocomplete="off">
  <button id="cold-call-btn">
    <svg width="13" height="13" viewBox="0 0 14 14" fill="none"><path d="M7 1v2M7 11v2M1 7h2M11 7h2M2.93 2.93l1.41 1.41M9.66 9.66l1.41 1.41M2.93 11.07l1.41-1.41M9.66 4.34l1.41-1.41" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><circle cx="7" cy="7" r="2.5" stroke="currentColor" stroke-width="1.5"/></svg>
    Cold Call
  </button>
</div>

<div id="cc-overlay">
  <div id="cc-card">
    <div id="cc-photo"><span id="cc-initials"></span><img id="cc-img" src="" alt="" style="display:none"></div>
    <div id="cc-name"></div>
    <div id="cc-group"></div>
    <div class="cc-actions">
      <button class="cc-btn" id="cc-again">Pick Again</button>
      <button class="cc-btn primary" id="cc-close">Done</button>
    </div>
  </div>
</div>

<div class="chart">
  <div class="col">
    <div class="group">
      <div class="group-label">Far Back Left</div>
      <div class="row">
        <div class="p" data-group="Far Back Left"><div class="zoom"><img src="images/nisa_z.png" alt="Nisa Z."></div><div class="avatar"><img src="images/nisa_z.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Nisa Z. (m)</span></div>
        <div class="p" data-group="Far Back Left"><div class="zoom"><img src="images/alan_a.png" alt="Alan A."></div><div class="avatar"><img src="images/alan_a.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Alan A. (m)</span></div>
        <div class="p" data-group="Far Back Left"><div class="zoom"><img src="images/chinna.png" alt="Chinna"></div><div class="avatar"><img src="images/chinna.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Chinna</span></div>
      </div>
      <div class="row">
        <div class="p" data-group="Far Back Left"><div class="zoom"><img src="images/ronald_g.png" alt="Ronald G."></div><div class="avatar"><img src="images/ronald_g.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Ronald G.</span></div>
      </div>
      <div class="row">
        <div class="p" data-group="Far Back Left"><div class="zoom"><img src="images/stephan_s.png" alt="Stephan S."></div><div class="avatar"><img src="images/stephan_s.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Stephan S.</span></div>
        <div class="p" data-group="Far Back Left"><div class="zoom"><img src="images/jacob_d.png" alt="Jacob D."></div><div class="avatar"><img src="images/jacob_d.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Jacob D.</span></div>
      </div>
    </div>
    <div class="group">
      <div class="group-label">Back Left</div>
      <div class="row">
        <div class="p" data-group="Back Left"><div class="zoom"><img src="images/naomi_a.png" alt="Naomi A."></div><div class="avatar"><img src="images/naomi_a.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Naomi A.</span></div>
        <div class="p" data-group="Back Left"><div class="zoom"><img src="images/merilyn_s.png" alt="Merilyn S."></div><div class="avatar"><img src="images/merilyn_s.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Merilyn S. (m)</span></div>
      </div>
      <div class="row">
        <div class="p" data-group="Back Left"><div class="zoom"><img src="images/chanda.png" alt="Chanda"></div><div class="avatar"><img src="images/chanda.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Chanda</span></div>
      </div>
      <div class="row">
        <div class="p np" data-group="Back Left"><div class="avatar"><div class="avatar-placeholder"></div></div><span>Hector P.</span></div>
        <div class="p" data-group="Back Left"><div class="zoom"><img src="images/dana_g.png" alt="Dana G."></div><div class="avatar"><img src="images/dana_g.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Dana G.</span></div>
      </div>
      <div class="row">
        <div class="p" data-group="Back Left"><div class="zoom"><img src="images/mari_c.png" alt="Mari C."></div><div class="avatar"><img src="images/mari_c.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Mari C.</span></div>
        <div class="p" data-group="Back Left"><div class="zoom"><img src="images/maree_d.png" alt="Maree D."></div><div class="avatar"><img src="images/maree_d.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Maree D.</span></div>
      </div>
    </div>
    <div class="group">
      <div class="group-label">Mid Left</div>
      <div class="row">
        <div class="p" data-group="Mid Left"><div class="zoom"><img src="images/yessenia_h.png" alt="Yessenia H."></div><div class="avatar"><img src="images/yessenia_h.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Yessenia H.</span></div>
        <div class="p" data-group="Mid Left"><div class="zoom"><img src="images/samantha_r.png" alt="Samantha R."></div><div class="avatar"><img src="images/samantha_r.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Samantha R. (m)</span></div>
      </div>
      <div class="row">
        <div class="p" data-group="Mid Left"><div class="zoom"><img src="images/vanessa_c.png" alt="Vanessa C."></div><div class="avatar"><img src="images/vanessa_c.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Vanessa C.</span></div>
      </div>
      <div class="row">
        <div class="p np" data-group="Mid Left"><div class="avatar"><div class="avatar-placeholder"></div></div><span>Paloma V.</span></div>
      </div>
    </div>
    <div class="group">
      <div class="group-label">Front Left</div>
      <div class="row">
        <div class="p np" data-group="Front Left"><div class="avatar"><div class="avatar-placeholder"></div></div><span>Kaylin M.</span></div>
        <div class="p np" data-group="Front Left"><div class="avatar"><div class="avatar-placeholder"></div></div><span>Ally P. (m)</span></div>
        <div class="p" data-group="Front Left"><div class="zoom"><img src="images/firdous_a.png" alt="Firdous A."></div><div class="avatar"><img src="images/firdous_a.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Firdous A.</span></div>
      </div>
      <div class="row">
        <div class="p" data-group="Front Left"><div class="zoom"><img src="images/liliya_z.png" alt="Liliya Z."></div><div class="avatar"><img src="images/liliya_z.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Liliya Z.</span></div>
      </div>
    </div>
  </div>

  <div class="col">
    <div class="group">
      <div class="group-label">Back Center</div>
      <div class="row">
        <div class="p" data-group="Back Center"><div class="zoom"><img src="images/denise_v.png" alt="Denise V."></div><div class="avatar"><img src="images/denise_v.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Denise V. (m)</span></div>
      </div>
      <div class="row">
        <div class="p np" data-group="Back Center"><div class="avatar"><div class="avatar-placeholder"></div></div><span>Michelle R.</span></div>
        <div class="p np" data-group="Back Center"><div class="avatar"><div class="avatar-placeholder"></div></div><span>Brittany R.-C.</span></div>
      </div>
      <div class="row">
        <div class="p" data-group="Back Center"><div class="zoom"><img src="images/gabriella_m.png" alt="Gabriella M."></div><div class="avatar"><img src="images/gabriella_m.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Gabriella M.</span></div>
        <div class="p np" data-group="Back Center"><div class="avatar"><div class="avatar-placeholder"></div></div><span>Rebecca C.</span></div>
      </div>
    </div>
    <div class="group">
      <div class="group-label">Mid Center</div>
      <div class="row">
        <div class="p" data-group="Mid Center"><div class="zoom"><img src="images/natalia_r.png" alt="Natalia R."></div><div class="avatar"><img src="images/natalia_r.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Natalia R. (m)</span></div>
      </div>
      <div class="row">
        <div class="p" data-group="Mid Center"><div class="zoom"><img src="images/elijah_s.png" alt="Elijah S."></div><div class="avatar"><img src="images/elijah_s.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Elijah S.</span></div>
        <div class="p np" data-group="Mid Center"><div class="avatar"><div class="avatar-placeholder"></div></div><span>Sheraz Shriqui</span></div>
      </div>
      <div class="row">
        <div class="p" data-group="Mid Center"><div class="zoom"><img src="images/megan_c.png" alt="Megan C."></div><div class="avatar"><img src="images/megan_c.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Megan C.</span></div>
        <div class="p" data-group="Mid Center"><div class="zoom"><img src="images/dani_k_s.png" alt="Dani K S."></div><div class="avatar"><img src="images/dani_k_s.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Dani K S.</span></div>
      </div>
    </div>
    <div class="group">
      <div class="group-label">Front Center</div>
      <div class="row">
        <div class="p" data-group="Front Center"><div class="zoom"><img src="images/leah.png" alt="Leah"></div><div class="avatar"><img src="images/leah.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Leah (m)</span></div>
        <div class="p" data-group="Front Center"><div class="zoom"><img src="images/manny.png" alt="Manny"></div><div class="avatar"><img src="images/manny.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Manny (m)</span></div>
      </div>
      <div class="row">
        <div class="p" data-group="Front Center"><div class="zoom"><img src="images/aileen_s.png" alt="Aileen S."></div><div class="avatar"><img src="images/aileen_s.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Aileen S.</span></div>
        <div class="p" data-group="Front Center"><div class="zoom"><img src="images/ariel_r.png" alt="Ariel R."></div><div class="avatar"><img src="images/ariel_r.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Ariel R.</span></div>
      </div>
      <div class="row">
        <div class="p" data-group="Front Center"><div class="zoom"><img src="images/jo_u.png" alt="Jo U."></div><div class="avatar"><img src="images/jo_u.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Jo U.</span></div>
      </div>
    </div>
  </div>

  <div class="col">
    <div class="group">
      <div class="group-label">Far Back Right</div>
      <div class="row">
        <div class="p" data-group="Far Back Right"><div class="zoom"><img src="images/diego_r.png" alt="Diego R."></div><div class="avatar"><img src="images/diego_r.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Diego R. (m)</span></div>
      </div>
      <div class="row">
        <div class="p np" data-group="Far Back Right"><div class="avatar"><div class="avatar-placeholder"></div></div><span>Jacob N.</span></div>
        <div class="p np" data-group="Far Back Right"><div class="avatar"><div class="avatar-placeholder"></div></div><span>Zakai B.-B.</span></div>
      </div>
      <div class="row">
        <div class="p" data-group="Far Back Right"><div class="zoom"><img src="images/josue_s.png" alt="Josue S."></div><div class="avatar"><img src="images/josue_s.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Josue S.</span></div>
        <div class="p np" data-group="Far Back Right"><div class="avatar"><div class="avatar-placeholder"></div></div><span>Yohance B.-B.</span></div>
      </div>
    </div>
    <div class="group">
      <div class="group-label">Back Right</div>
      <div class="row">
        <div class="p" data-group="Back Right"><div class="zoom"><img src="images/ashley_n.png" alt="Ashley N."></div><div class="avatar"><img src="images/ashley_n.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Ashley N. (m)</span></div>
      </div>
      <div class="row">
        <div class="p" data-group="Back Right"><div class="zoom"><img src="images/brooklyn_a.png" alt="Brooklyn A."></div><div class="avatar"><img src="images/brooklyn_a.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Brooklyn A.</span></div>
        <div class="p" data-group="Back Right"><div class="zoom"><img src="images/javin_h.png" alt="Javin H."></div><div class="avatar"><img src="images/javin_h.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Javin H.</span></div>
      </div>
      <div class="row">
        <div class="p" data-group="Back Right"><div class="zoom"><img src="images/aislinn_m.png" alt="Aislinn M."></div><div class="avatar"><img src="images/aislinn_m.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Aislinn M.</span></div>
        <div class="p" data-group="Back Right"><div class="zoom"><img src="images/cristhel_t.png" alt="Cristhel T."></div><div class="avatar"><img src="images/cristhel_t.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Cristhel T.</span></div>
      </div>
    </div>
    <div class="group">
      <div class="group-label">Mid-Back Right</div>
      <div class="row">
        <div class="p" data-group="Mid-Back Right"><div class="zoom"><img src="images/haya.png" alt="Haya"></div><div class="avatar"><img src="images/haya.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Haya (m)</span></div>
      </div>
      <div class="row">
        <div class="p" data-group="Mid-Back Right"><div class="zoom"><img src="images/lucinda_z.png" alt="Lucinda Z."></div><div class="avatar"><img src="images/lucinda_z.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Lucinda Z.</span></div>
        <div class="p" data-group="Mid-Back Right"><div class="zoom"><img src="images/giselle_a.png" alt="Giselle A."></div><div class="avatar"><img src="images/giselle_a.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Giselle A.</span></div>
      </div>
    </div>
    <div class="group">
      <div class="group-label">Mid Right</div>
      <div class="row">
        <div class="p" data-group="Mid Right"><div class="zoom"><img src="images/hanna_c.png" alt="Hanna C."></div><div class="avatar"><img src="images/hanna_c.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Hanna C.</span></div>
        <div class="p" data-group="Mid Right"><div class="zoom"><img src="images/abril_p.png" alt="Abril P."></div><div class="avatar"><img src="images/abril_p.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Abril P. (m)</span></div>
      </div>
      <div class="row">
        <div class="p" data-group="Mid Right"><div class="zoom"><img src="images/anely_l.png" alt="Anely L."></div><div class="avatar"><img src="images/anely_l.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Anely L.</span></div>
      </div>
      <div class="row">
        <div class="p" data-group="Mid Right"><div class="zoom"><img src="images/alejandra_f.png" alt="Alejandra F."></div><div class="avatar"><img src="images/alejandra_f.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Alejandra F.</span></div>
        <div class="p" data-group="Mid Right"><div class="zoom"><img src="images/emely_c.png" alt="Emely C."></div><div class="avatar"><img src="images/emely_c.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Emely C.</span></div>
      </div>
    </div>
    <div class="group">
      <div class="group-label">Front Right</div>
      <div class="row">
        <div class="p" data-group="Front Right"><div class="zoom"><img src="images/emeli_e.png" alt="Emeli E."></div><div class="avatar"><img src="images/emeli_e.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Emeli E. (m)</span></div>
      </div>
      <div class="row">
        <div class="p" data-group="Front Right"><div class="zoom"><img src="images/nevaeh_t.png" alt="Nevaeh T."></div><div class="avatar"><img src="images/nevaeh_t.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Nevaeh T.</span></div>
        <div class="p" data-group="Front Right"><div class="zoom"><img src="images/layla_a.png" alt="Layla A."></div><div class="avatar"><img src="images/layla_a.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Layla A.</span></div>
      </div>
      <div class="row">
        <div class="p np" data-group="Front Right"><div class="avatar"><div class="avatar-placeholder"></div></div><span>Danielle W.</span></div>
        <div class="p" data-group="Front Right"><div class="zoom"><img src="images/felicia_t.png" alt="Felicia T."></div><div class="avatar"><img src="images/felicia_t.png" onerror="this.closest('.p').classList.add('missing')"></div><span>Felicia T.</span></div>
      </div>
    </div>
  </div>
</div>

<script>
  // search
  const input = document.getElementById('search');
  const chips = Array.from(document.querySelectorAll('.p'));
  input.addEventListener('input', () => {
    const q = input.value.trim().toLowerCase();
    if (!q) { chips.forEach(c => c.classList.remove('highlight','dim')); return; }
    chips.forEach(c => {
      const name = c.querySelector('span').textContent.toLowerCase();
      c.classList.toggle('highlight', name.includes(q));
      c.classList.toggle('dim', !name.includes(q));
    });
  });

  // cold call
  const overlay  = document.getElementById('cc-overlay');
  const ccImg    = document.getElementById('cc-img');
  const ccInit   = document.getElementById('cc-initials');
  const ccName   = document.getElementById('cc-name');
  const ccGroup  = document.getElementById('cc-group');
  let lastCalled = null;

  function pickRandom() {
    if (lastCalled) lastCalled.classList.remove('called');
    const pool = chips.filter(c => !c.classList.contains('dim'));
    const pick = pool[Math.floor(Math.random() * pool.length)];
    lastCalled = pick;

    const name   = pick.querySelector('span').textContent;
    const group  = pick.dataset.group || '';
    const imgEl  = pick.querySelector('.avatar img');
    const hasPic = imgEl && !pick.classList.contains('missing');

    pick.classList.add('called');
    pick.scrollIntoView({ behavior: 'smooth', block: 'center' });

    ccName.textContent  = name;
    ccGroup.textContent = group;

    if (hasPic) {
      ccImg.src = imgEl.src;
      ccImg.style.display = 'block';
      ccInit.style.display = 'none';
    } else {
      ccImg.style.display = 'none';
      ccInit.textContent  = name.split(' ').map(w => w[0]).join('').slice(0,2).toUpperCase();
      ccInit.style.display = 'block';
    }

    // re-trigger animation
    const card = document.getElementById('cc-card');
    card.style.animation = 'none';
    card.offsetHeight;
    card.style.animation = '';

    overlay.classList.add('active');
  }

  document.getElementById('cold-call-btn').addEventListener('click', pickRandom);
  document.getElementById('cc-again').addEventListener('click', pickRandom);
  document.getElementById('cc-close').addEventListener('click', () => overlay.classList.remove('active'));
  overlay.addEventListener('click', e => { if (e.target === overlay) overlay.classList.remove('active'); });
</script>
</body>
</html>